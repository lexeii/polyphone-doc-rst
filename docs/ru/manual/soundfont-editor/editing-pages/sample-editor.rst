.. index:: семпл, редактор семплов
.. _sample editor:

Редактор семплов
================

При нажатии на один или несколько семплов в :ref:`дереве <tree>` открывается страница редактирования семплов.

Эта страница разделена на несколько частей:

* `график         <sample editor graph_>`_, представляющий семпл,
* `информационная <sample editor info_>`_ зона,
* анализ `частот  <sample editor frequency_>`_,
* `эквалайзер     <sample editor equalizer_>`_,
* `проигрыватель  <sample editor player_>`_ семплов.


.. figure:: images/edit_sample.png

   Редактор семплов


.. _sample editor graph:

График
------


Масштабирование и перемещение
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

График позволяет визуализировать звуковую волну.
Изображение можно масштабировать по вертикали и горизонтали, перемещая мышь с нажатой правой кнопкой:

* перемещение вправо растягивает горизонтальную ось,
* перемещение влево сжимает горизонтальную ось,
* перемещение вверх растягивает вертикальную ось,
* перемещение вниз сжимает вертикальную ось.

Если горизонтальная ось была растянута, можно перемещать график по горизонтали, удерживая левую кнопку мыши.


Петля и позиции воспроизведения
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Зеленая вертикальная полоса указывает начальную позицию петли (можно изменить щелчком левой кнопкой мыши), красная полоса указывает позицию конца петли (можно изменить щелчком правой кнопкой мыши).
С каждой вертикальной полосой связана соответствующая пунктирная линия, представляющая часть волны, что помогает совместить звуковую волну в начале и конце петли.

Во время воспроизведения белая вертикальная полоса движется вдоль графика и указывает позицию воспроизведения в режиме реального времени.


Вырезание семпла
^^^^^^^^^^^^^^^^

Удерживая кнопку :kbd:`Alt` на клавиатуре, можно указать область обрезки:

* начало области будет там, где была нажата левая кнопка мыши,
* конец области будет там, где была отпущена левая кнопка мыши.

После указания области появится диалоговое окно с запросом подтверждения перед вырезанием семпла.


.. figure:: images/cutting_sample.png

   Вырезание семпла


Цвета графика
^^^^^^^^^^^^^

Цвета графика можно изменить в :ref:`настройках <interface settings>` программы.


.. _sample editor info:

Раздел «Информация»
-------------------

Раздел «Информация» позволяет редактировать следующую информацию:

* начало и конец петли,
* корневую клавишу семпла и его коррекцию, применяемую для настройки звука на соответствующую ноту,
* частота дискретизации звука (изменение приведёт к ресемплированию),
* тип звука (не связан: моно, в противном случае слева, справа или связан),
* связанный семпл, в случае стерео-семпла.

Кроме того, отображается размер семпла в выборках (количество значений) и в секундах.

Имеется кнопка, которая автоматически изменяет начало и конец петли, так что петля представляет собой весь семпл.
Другая кнопка автоматически изменяет корневую клавишу и коррекцию, чтобы они соответствовали оценке `частоты <sample editor frequency_>`_.

Любое изменение стереофонического семпла может быть применено также и к связанному семплу, если в :ref:`настройках <general settings>` отмечена опция :guilabel:`Редактирование стерео`.
Можно изменить несколько семплов одновременно, для чего сначала нужно выбрать их все в :ref:`дереве <tree>`.


.. _sample editor frequency:

Частотный анализ
----------------

Частотный анализ производится на основе преобразования Фурье (график показывает интенсивность содержащихся в сигнале частот).
Справа показан список преобладающих пиков со следующей информацией:

* соотношение между интенсивностью данного пика и интенсивностью максимального пика,
* частота,
* соответствующая клавиша,
* коррекция.

На основе этих данных оценивается высота звука.
Эта оценка может быть использована для настройки тона.

Можно экспортировать график в файл изображения png с помощью контекстного меню графика (по щелчку правой кнопкой мыши).
Также доступен :ref:`инструмент <sample tool peakfrequencies>` экспорта пиковой информации всех семплов.


.. figure:: images/fourier_graph.png

   График частотного анализа


.. _sample editor equalizer:

Эквалайзер
----------

Эквалайзер позволяет усиливать и ослаблять некоторые частоты от :math:`-15` до 15 дБ.
Можно прослушать эффект с включенной опцией :guilabel:`прослушать`, а затем, собственно, применить эффект, нажав кнопку :guilabel:`Применить`.
Нажатие кнопки :guilabel:`сброс` сбрасывает все регулировки на 0 дБ (но не убирает применённый на звук эффект: для этого нажмите кнопку :guilabel:`отменить` на :ref:`панели инструментов <toolbar>`).

Любое изменение стерео-семпла может быть автоматически применено и к связанному семплу, если такая опция выбрана в :ref:`настройках <general settings>`.


.. _sample editor player:

Плеер
-----

Плеер воспроизводит звук.
Во время воспроизведения белый курсор движется по графику, указывая позицию воспроизведения.
Варианты воспроизведения:

:Петля: Воспроизводит звуковую петлю, если определены начало и конец петли.
:Стерео: Воспроизводит семпл в стерео вместе с его связанным семплом.
  Если включена петля, используются две соответствующих петли (они могут быть разными).
:Синус: К звуку добавляется синусная калибровка, позволяющая настроить семпл с точностью до сотой доли.
  Сначала необходимо указать корневую клавишу.
  На этом этапе можно услышать биения, если частота синусоиды немного отличается от основной частоты звука.
  Чтобы настроить семпл как можно лучше, остаётся точно подобрать значение корректировки, сделав биения как можно медленнее.
  Просмотрите это :ref:`учебное пособие <how to prepare a sample>` для получения дополнительной информации.

Если было запущено воспроизведение, то при переключении в :ref:`дереве <tree>` с одного семпла на другой, будет воспроизводиться новый семпл.
Кроме того, нажатие клавиши :kbd:`пробел` запускает или останавливает воспроизведение при перемещении по дереву.
