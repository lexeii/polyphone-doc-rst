.. index:: дерево
.. _tree:

Дерево
======

Дерево — это первый элемент в редакторе, на котором вы должны сосредоточиться.
Оно отражает архитектуру открытого SoundFont и управляет правой частью программы, когда вы нажимаете на тот или иной элемент.

Дерево всегда отображается с одной и той же `структурой <tree structure_>`_, содержит `контекстное меню <tree menu_>`_ и имеет функции `перетаскивания <tree dragdrop_>`_, `копирования и вставки <tree copypaste_>`_ и `поиска <tree search_>`_.


.. index:: дерево; структура
.. _tree structure:

Структура
---------

Структура дерева состоит из четырёх заголовков и внутреннего содержания заголовков :guilabel:`Семплы`, :guilabel:`Инструменты` и :guilabel:`Пресеты`.


.. figure:: images/tree_1.png

   Дерево: структура


Заголовок «Общее»
^^^^^^^^^^^^^^^^^

Щелчок по заголовку :guilabel:`Общее` открывает редактор :ref:`общей информации <edit general>`.


Раздел «Семплы»
^^^^^^^^^^^^^^^

В этом разделе перечислены все содержащиеся в SoundFont семплы, которые являются исходным материалом, из которого строятся все инструменты.
Щелчок по тому или иному семплу вызывает :ref:`редактор семплов <sample editor>`.
Щелчок по заголовку :guilabel:`Семплы` отображает :ref:`сводку конфигурации <conf summ sample>` всех семплов.


Раздел «Инструменты»
^^^^^^^^^^^^^^^^^^^^

В этом разделе перечислены все инструменты, содержащиеся в SoundFont.
Инструмент — это промежуточный элемент, созданный из семплов и используемый в пресетах.
Инструменты содержат ссылки на семплы, называемые «разделами», которые отображаются в виде списка под каждым инструментом.
Щелчок по инструменту или по одному из его разделов вызывает :ref:`редактор инструмента <instrument editor>`.
Щелчок по заголовку :guilabel:`Инструменты` отображает :ref:`сводную информацию о конфигурации <conf summ instrument>` всех инструментов.


Раздел «Пресеты»
^^^^^^^^^^^^^^^^

В этом разделе перечислены все пресеты, содержащиеся в SoundFont.
Пресет — это финальный элемент, созданный из инструментов и доступный извне SoundFont.
Пресеты содержат ссылки на инструменты, называемые «разделами», которые отображаются в виде списка под каждым пресетом.
Щелчок по пресету или одному из его разделов вызывает :ref:`редактор пресетов <preset editor>`.
Щелчок по заголовку :guilabel:`Пресеты` отображает :ref:`сводную информацию о конфигурации <conf summ preset>` всех пресетов.


.. index:: дерево; контекстное меню
.. _tree menu:

Контекстное меню
----------------

Щелчок правой кнопкой мыши по элементу показывает меню, включающее следующие действия:

:Связать с…: Связать выбранные семплы с инструментом; связать выбранные инструменты с пресетом.
:Заменить на…: Заменить семпл другим семплом в инструменте; заменить инструмент другим инструментом в пресете.
  Конфигурация семпла или инструмента при этом сохраняется.
:Копировать: Копировать выбранные элементы; также можно нажать :kbd:`Ctrl+C`.
:Вставить: Вставить ранее скопированные элементы; также можно нажать :kbd:`Ctrl+V`.
:Дублировать: Дублировать выбранные элементы: семплы, инструменты, пресеты или разделы.
  Также можно нажать :kbd:`Ctrl+D`.
:Удалить: Удалить выбранные элементы; также доступно с :kbd:`Del`.
:Переименовать или Массовое переименование: Переименовать выбранные элементы; также можно нажать :kbd:`F2`.

  Когда выбрано несколько элементов, предоставляются разные варианты:

  * перезаписать существующее имя именем клавиши в качестве суффикса (только для семплов),
  * перезаписать существующее имя числовым суффиксом по возрастанию,
  * заменить символы,
  * вставить текст в определённой позиции,
  * удалить диапазон символов.


.. figure:: images/tree_2.png

   Дерево: контекстное меню


.. index:: дерево; перетаскивание
.. _tree dragdrop:

Перетаскивание
--------------

Операция перетаскивания в дереве позволяет быстро связывать и копировать.
Перед перетаскиванием необходимо выбрать один или несколько элементов (это можно сделать с помощью клавиш :kbd:`Ctrl` и :kbd:`Shift`.

Кроме того, результат перетаскивания зависит от типа перетаскиваемых элементов и типа целевого элемента.

Семпл → инструмент
  Ассоциировать семпл с инструментом, создать раздел инструмента.

Семпл → заголовок :guilabel:`Инструменты`
  Создать один инструмент, содержащий все перетаскиваемые семплы, либо создать по одному инструменту на каждый перетаскиваемый семпл.

Инструмент → пресет
  Ассоциировать инструмент с пресетом, создать раздел пресета.

Инструмент → инструмент
  Копировать все разделы исходного инструмента в целевой инструмент (это может быть и тот же самый инструмент).

Раздел инструмента → инструмент или раздел инструмента
  Копировать раздел исходного инструмента в целевой инструмент (это может быть и тот же самый инструмент).

Инструмент → заголовок :guilabel:`Пресеты`
  Создать пресет, содержащий все перетаскиваемые инструменты, или создать по одному пресету на каждый перетаскиваемый инструмент.

Пресет → пресет
  Копировать все разделы исходного пресета в целевой пресет (это может быть и тот же самый пресет).

Раздел пресета → пресет или раздел пресета
  Копировать раздел исходного пресета в целевой пресет (это может быть и тот же самый пресет).


.. index:: дерево; копирование и вставка
.. _tree copypaste:

Копирование и вставка
---------------------

Всё, что можно сделать с помощью перетаскивания, как показано ранее, также возможно сделать и с помощью копирования / вставки.
Того же результата можно достигнуть с помощью :kbd:`Ctrl+C` и :kbd:`Ctrl+V` в дереве.

Копирование и вставка также допустима в разных SoundFont.
Можно скопировать один элемент в одном SoundFont и вставить его в другой.
Разрешён множественный выбор.

Выбраны семплы
  Копировать семплы.

Выбраны инструменты
  Копировать инструменты, включая все связанные семплы.

Выбраны пресеты
  Копировать пресеты, включая все связанные инструменты и семплы.

При копировании элементов между разными SoundFont, если элемент с таким именем уже существует, предоставляется несколько вариантов:

* игнорировать операцию, в этом случае для элемента с совпадающим именем копрование отменяется,
* заменить существующий элемент, в этом случае существующий элемент заменяется скопированным элементом,
* дублировать элемент, в этом случае элемент копируется под другим именем рядом с существующим элементом.


.. index:: дерево; поиск
.. _tree search:

Поиск
-----

Чтобы упростить поиск элементов в дереве, панель поиска предоставляет фильтрацию.


.. figure:: images/tree_3.png

   Дерево: поиск


Когда строка вставляется в панель поиска, отображаются элементы, содержащие ее.
Кроме того:

* если строка входит в название семпла, то отображаются инструменты, которые используют этот семпл, и пресеты, которые используют инструменты, использующие этот семпл,
* если строка входит в название инструмента, то отображаются семплы, которые используются этим инструментом, и пресеты, которые используют этот инструмент,
* если строка входит в название пресета, то отображаются инструменты, которые используются этим пресетом, и сэмплы, которые используются инструментами, использующими этот пресет.

Фильтрацию можно отключить, щёлкнув по крестику справа от поля ввода.
