.. _toolbar:

Панель инструментов
===================

Панель инструментов, расположенная в верхней части редактора, содержит значки:

* общих `функций редактирования       <toolbar edit_>`_,
* переключения `представления         <toolbar view_>`_ в редакторах,
* отображения `рекордера              <toolbar recorder_>`_,
* отображения `виртуальной клавиатуры <toolbar keyboard_>`_.


.. figure:: images/toolbar.png

   Панель инструментов


.. _toolbar edit:

Функции редактирования
----------------------

Элементы в левой части панели инструментов предназначены для общих функций редактирования:

:Новый семпл: Добавить новые :ref:`семплы <sample editor>` в SoundFont.
  Откроется диалоговое окно выбора аудиофайлов (можно импортировать файлы ``.wav`` и ``.flac``).
:Новый инструмент: Создать новый :ref:`инструмент <instrument editor>`.
:Новый пресет: Cоздать новый :ref:`пресет <preset editor>`.
:Инструменты: При нажатии на эту кнопку отобразится меню, содержащее все доступные :ref:`инструменты <tool menu>` для элементов, выбранных в :ref:`дереве <tree>`.
:Отменить: Отменить последние изменения.
:Повторить: Повторить последние отменённые изменения.
:Сохранить файл: Сохранить SoundFont.


.. _toolbar view:

Переключение представления
--------------------------

В правой части панели инструментов могут отображаться значки в зависимости от того, какой :ref:`редактор <editing pages>` отображается:

* при редактировании инструмента возможно переключение между :ref:`табличным видом <instrument editor table>`, :ref:`редактором диапазонов <instrument editor range>` и :ref:`редактором огибающей <instrument editor envelope>`,
* при редактировании пресета возможно переключение между табличным видом и редактором диапазонов,
* в противном случае ничего не отображается.


.. _toolbar recorder:

Рекордер
--------

При нажатии на значок открывается окно рекордера, который может записывать звук на выходе Polyphone.


.. figure:: images/recorder.png

   Рекордер


Левая кнопка может иметь два возможных состояния:

:Запись: Начать новую запись, если захват остановлен.
  Здесь можно указать имя файла, в который будет записываться аудиосигнал.
:Стоп: Остановить текущий захват.

Правая кнопка также может иметь два возможных состояния (доступно только при включённом захвате):

:Пауза: Приостановить текущий захват.
:Возобновление: Возобновить текущий захват.


.. _toolbar keyboard:

Виртуальная клавиатура
----------------------

При нажатии на значок открывается окно с виртуальной клавиатурой, созданной для тестирования семплов, инструментов и пресетов.
Это окно включает :abbr:`MIDI (Musical Instrument Digital Interface)`-сигналы:

* **нота вкл.** / **нота выкл.** / **послекасание** на клавиатуре пианино,
* другие сигналы :abbr:`MIDI`, если **область MIDI-контроллеров** распахнута.


.. figure:: images/virtual_keyboard.png

   Виртуальная клавиатура


Клавиатура фортепиано
^^^^^^^^^^^^^^^^^^^^^

Клавиатура фортепиано запускает сигналы, содержащие номера клавиш и силу нажатия.
Клавиатурой можно управлять тремя способами:

:с помощью мыши: Требуемая клавиша может быть нажата мышью.
  Сила нажатия определяется в соответствии с вертикальным положением щелчка.
  После щелчка последующие движения в пределах одной и той же клавиши вызовут сигналы послекасания.
:с помощью клавиатуры компьютера: используемые клавиши определяются в :ref:`настройках <keyboard settings>`.
:используя внешнюю MIDI-клавиатуру: вход MIDI определяется в :ref:`настройках <general settings>`.
  Если клавиатура фортепиано видна, она покажет, что вы играете.


Маркеры и цвета
~~~~~~~~~~~~~~~

* Когда выбран :ref:`инструмент <instrument editor>` или :ref:`пресет <preset editor>`, область, не охваченная разделами, становится **серой**.
  Таким образом, можно визуализировать весь диапазон инструмента или пресета.
* Когда выбран раздел инструмента или пресета, его диапазон отображается так же, как и выше.
  Кроме того, его корневая клавиша обозначается **оранжевым маркером**.
* Когда клавиша выбрана на клавиатуре, она отображается **синим цветом** (или цветом выделения, выбранным в :ref:`настройках <interface settings>` программы).
  Кроме того, соответствующий диапазон (диапазоны) отображается **голубым цветом**.
  Это относится только к уровню инструмента.
* Среднее До (клавиша 60) обозначено **чёрным маркером**.


Полезные сочетания клавиш
~~~~~~~~~~~~~~~~~~~~~~~~~

:kbd:`Ctrl+K`
  Это сочетание может в любой момент установить фокус на виртуальной клавиатуре.
  Это позволяет, например, при редактировании таблицы воспроизводить ноты вместо редактирования ячейки.
  Эффект свечения на виртуальной клавиатуре подтверждает, что фокус находится на ней.

:kbd:`Ctrl+1`, :kbd:`Ctrl+2`, … :kbd:`Ctrl+8`
  Эти сочетания меняют октавы, проигрываемые на клавиатуре компьютера.
  После нажатия :kbd:`Ctrl+1` можно воспроизвести самую нижнюю октаву.
  Наивысшая октава становится доступной с помощью :kbd:`Ctrl+8`.

:kbd:`→` / :kbd:`←`
  Стрелка вправо или влево будет воспроизводить тон выше или ниже последней нажатой клавиши с той же силой нажатия.
  Если при этом удерживать клавишу :kbd:`Shift`, то можно пропустить клавиши.

:kbd:`↑` / :kbd:`↓`
  Стрелка вверх или вниз будет воспроизводить тот же тон, что и у последней нажатой клавиши, но с большей или меньшей силой нажатия.
  Если при этом удерживать клавишу :kbd:`Shift`, то можно пропустить значения силы нажатия.


MIDI-контроллеры
^^^^^^^^^^^^^^^^

При нажатии на стрелку, расположенную снизу справа, может показать или скрыть область MIDI-контроллеров.
Если вы играете с модуляторами, рекомендуется использовать эти функции для проверки вашего SoundFont.


.. figure:: images/virtual_keyboard_2.png

   Виртуальная клавиатура с MIDI-контроллерами


Эта область состоит из таких элементов:

:Регулятор тона: Увеличивает или уменьшает высоту тона.
  Он автоматически возвращается в исходное нулевое положение.
:Чувствительность: Определяет диапазон изменения регулятора тона в полутонах.
  По умолчанию это 2 (один полный тон).
:Давление: Сила нажатия на клавиатуру.
  Его можно сравнить с послекасанием, но, тогда как послекасание специфично для клавиши, давление является глобальным сигналом для всех клавиш.
:Ручки: Три ручки, при помощи которых можно управлять разными MIDI-контроллерами.
  Для каждой ручки можно указать номер контроллера и установить его значение.
:Кнопка: Предназначена для установки значения MIDI-контроллера в 0 или 127 (полезно, например, для педали сустейна).
  Это как ручка, но только с двумя возможными значениями.
