.. _toolbar:

Панель инструментов
===================

Панель инструментов в верхней части редактора содержит значки:

* частых `функций редактирования      <toolbar edit_>`_,
* переключения `представления         <toolbar view_>`_ в редакторах,
* отображения `рекордера              <toolbar recorder_>`_,
* отображения `виртуальной клавиатуры <toolbar keyboard_>`_.


.. figure:: images/toolbar.png

   Панель инструментов


.. _toolbar edit:

Функции редактирования
----------------------

Значки слева выполняют ходовые функции редактирования:

|sample| Новый семпл
  Добавить новые :ref:`семплы <sample editor>` в SoundFont.
  Polyphone импортирует звуковые файлы в форматах :file:`.wav` и :file:`.flac`.
|instrument| Новый инструмент
  Создать новый :ref:`инструмент <instrument editor>`.
|preset| Новый пресет
  Cоздать новый :ref:`пресет <preset editor>`.
|tools| Средства
  В этом меню перечисляются :ref:`средства <tool menu>`, доступные для выбранных в :ref:`дереве <tree>` элементов.
|undo| Отменить
  Отменить последние изменения.
|redo| Повторить
  Повторить последние отменённые изменения.
|save| Сохранить файл
  Сохранить SoundFont.


.. _toolbar view:

Переключение представления
--------------------------

Значки справа переключают представление информации в зависимости от :ref:`редактора <editing pages>`:

* при редактировании инструмента переключайтесь между |table| :ref:`табличным видом <instrument editor table>`, |range| :ref:`редактором диапазонов <instrument editor range>` и |envelope| :ref:`редактором огибающей <instrument editor envelope>`,
* при редактировании пресета переключайтесь между |table| табличным видом и |range| редактором диапазонов,
* иначе ничего не отображается.


.. _toolbar recorder:

Рекордер
--------

При нажатии на значок |recorder| открывается рекордер, который записывает звук на выходе Polyphone.


.. figure:: images/recorder.png

   Рекордер


Два возможных состояния левой кнопки:

:Запись: Начать новую запись, если запись остановлена.
  Введите имя файла, в который будет записываться звук.
:Стоп: Остановить запись.

При включённой записи правая кнопка находится в двух возможных состояния:

:Пауза: Приостановить запись.
:Возобновление: Возобновить запись.


.. _toolbar keyboard:

Виртуальная клавиатура
----------------------

При нажатии на значок |piano| открывается виртуальная клавиатура, которая предназначена для тестирования семплов, инструментов и пресетов.
Клавиатура посылает :abbr:`MIDI (Musical Instrument Digital Interface)`-сигналы:

* **нота вкл.** / **нота выкл.** / **послекасание** при помощи клавиш фортепиано,
* другие сигналы :abbr:`MIDI`, если **область MIDI-контроллеров** открыта.


.. figure:: images/virtual_keyboard.png

   Виртуальная клавиатура


Клавиатура фортепиано
^^^^^^^^^^^^^^^^^^^^^

Клавиатура фортепиано посылает сигналы, которые содержат номера клавиш и силу нажатия.
Клавиатура управляется тремя способами:

:с помощью мыши: щёлкните по клавише мышью.
  Чем ниже щёлкните, тем сильнее будет звук.
  Если не отпускать кнопку мыши, то последующие движения в пределах клавиши вызовут сигналы послекасания.
:с помощью клавиатуры компьютера: используемые клавиши определяются в :ref:`настройках <keyboard settings>`.
:с помощью внешней MIDI-клавиатуры: укажите вход MIDI в :ref:`настройках <general settings>`.
  При этом клавиши на виртуальной клавиатуре будут показывать ноты, проигрываемые на MIDI-клавиатуре.


Маркеры и цвета
~~~~~~~~~~~~~~~

* Когда выбран :ref:`инструмент <instrument editor>` или :ref:`пресет <preset editor>` — область, не охваченная разделами, становится **серой**.
  Так визуализируется полный диапазон инструмента или пресета.
* Когда выбран раздел инструмента или пресета — его диапазон отображается так же, как и выше.
  Кроме того, его корневая клавиша обозначается **оранжевым маркером**.
* Когда на клавиатуре нажата клавиша — она отображается **синим цветом** или цветом выделения, указанным в :ref:`настройках <interface settings>` программы.
  Диапазон, в который входит эта клавиша, отображается **голубым цветом**.
  Это относится только к уровню инструмента.
* Среднее До (клавиша 60) обозначается **чёрным маркером**.


Полезные сочетания клавиш
~~~~~~~~~~~~~~~~~~~~~~~~~

:kbd:`Ctrl+K`
  Переключиться на виртуальную клавиатуру.
  Так, при редактировании таблицы можно воспроизводить ноты вместо того, чтобы редактировать ячейку.
  Эффект свечения на виртуальной клавиатуре подтверждает, что она ждёт нажатия клавиш.

:kbd:`Ctrl+1`, :kbd:`Ctrl+2`, … :kbd:`Ctrl+8`
  Изменить октавы компьютерной клавиатуры.
  Самая нижняя октава — :kbd:`Ctrl+1`.
  Самая высокая октава — :kbd:`Ctrl+8`.

:kbd:`→` / :kbd:`←`
  Воспроизвести ноту выше или ниже, чем последняя нажатая клавиша, с той же силой нажатия.
  Если при этом удерживать клавишу :kbd:`Shift`, то можно перескочить через клавишу.

:kbd:`↑` / :kbd:`↓`
  Воспроизвести ту же ноту, что и у последней нажатой клавиши, но с большей или меньшей силой нажатия.
  Если при этом удерживать клавишу :kbd:`Shift`, то можно пропустить значения силы нажатия.


MIDI-контроллеры
^^^^^^^^^^^^^^^^

Область MIDI-контроллеров показывается или скрывается при нажатии на стрелку, расположенную снизу справа.
Если играете с модуляторами, используйте эту область для проверки SoundFont.


.. figure:: images/virtual_keyboard_2.png

   Виртуальная клавиатура с MIDI-контроллерами


Эта область состоит из таких элементов:

:Регулятор тона: Увеличивает или уменьшает высоту тона.
  Автоматически возвращается в исходное нулевое положение.
:Чувствительность: Определяет диапазон в полутонах, на сколько будет изменяться регулятор тона.
  Значение по умолчанию — 2, один полный тон.
:Давление: Сила нажатия на клавиатуру.
  Давление работает так же как послекасание, но послекасание специфично для клавиши, а давление — глобально для клавиатуры.
:Ручки: Три ручки управления произвольными MIDI-контроллерами.
  Для каждой ручки указывается номер контроллера и устанавливается значение.
:Кнопка: Устанавливает значение MIDI-контроллера в 0 или 127 — так работает педаль сустейна.
  Кнопка — частный случай ручки с двумя возможными значениями.


.. встроенные изображения:

.. |sample|     image:: images/toolbar_sample.*
   :scale: 50%
.. |instrument| image:: images/toolbar_instrument.*
   :scale: 50%
.. |preset|     image:: images/toolbar_preset.*
   :scale: 50%
.. |tools|      image:: images/toolbar_toolbox.*
   :scale: 50%
.. |undo|       image:: images/toolbar_undo.*
   :scale: 50%
.. |redo|       image:: images/toolbar_redo.*
   :scale: 50%
.. |save|       image:: images/toolbar_save.*
   :scale: 50%
.. |table|      image:: images/toolbar_table.*
   :scale: 50%
.. |range|      image:: images/toolbar_range.*
   :scale: 50%
.. |envelope|   image:: images/toolbar_adsr.*
   :scale: 50%
.. |recorder|   image:: images/toolbar_recorder.*
   :scale: 50%
.. |piano|      image:: images/toolbar_piano.*
   :scale: 50%
