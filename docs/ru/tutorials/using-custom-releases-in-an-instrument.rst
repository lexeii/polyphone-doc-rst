.. _custom releases:

Использование заказного затухания в инструменте
===============================================

Цель этого урока — создать выразительные инструменты, используя зацикленные семплы с записанными затуханими.
Вы узнаете, как в полной мере использовать возможности таких семплов, используя не только атаку и поддержку семпла, но также и его затухание.


Разница между обычным и заказным затуханием
-------------------------------------------

Когда нота начинает играть, вы слышите начало семпла (атака), а затем, пока вы не отпустите клавишу, петля внутри семпла будет воспроизводиться снова и снова (фаза поддержки).
Когда вы отпустите клавишу, петля всё равно будет использоваться, и звук будет постепенно затухать, пока вы его больше не услышите.
Это традиционный способ сделать затухание в SoundFont: его легко установить, но он игнорирует переходные гармоники, которые могут возникнуть во время реального затухания акустического инструмента.
Этот тип затухания можно рассматривать как простое продолжение фазы поддержки.

Более реалистичным будет использование реального затухания, представленного записанным семплом.
Атака и фаза поддержки будут выполняться точно так же, но когда клавиша будет отпущена, фаза поддержки резко оборвётся, уступая место для записанного затухания, которое начнёт звучать.
Заказное затухание используется вместо продолжения звука фазы поддержки, добавляя детали к звуку.

Задача создания такого инструмента разделяется на две части:

* сначала определение атаки и фазы поддержки,
* затем запуск затухания.

Пример, который будет взят здесь, — это звук трубы в органе, из-за его высокой гармонической составляющей и слышимого развития звука.


Подготовка семплов
------------------

Могут быть два случая: у вас есть файл, содержащий полный семпл от атаки до затухания, или у вас есть дополнительный файл, содержащий только затухание, которое уже было извлечено.


Полный семпл, включающий затухание
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Загрузите семпл в Polyphone дважды, а затем, во втором экземпляре семпла удалите всё кроме затухания.
Удаление можно выполнить, удерживая нажатой клавишу :kbd:`Alt` и указав область на :ref:`графике семпла <sample editor graph>`.
Чтобы найти точку, где начинается затухание, воспроизведите семпл несколько раз и попытайтесь найти точку, в которой, по вашему мнению, больше нету силы, вызвавшей звук.
Эта последняя часть и будет затуханием.
Затем следуйте инструкциям ниже.


Отдельный семпл с затуханием
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Семплы для примера: :download:`семпл 1 <https://www.polyphone-soundfonts.com/downloads/tutorials/trumpet.wav>`, :download:`семпл 2 <https://www.polyphone-soundfonts.com/downloads/tutorials/trumpet-release.wav>`.

Если у вас есть 2 семпла, один из которых содержит начало и фазу поддержки звука, а другой содержит затухание, вам нужно только убедиться, что затухание начинается с очень короткой пустоты (достаточно пары точек), которая находится вблизи нуля.
Из этой пустоты будет сделана короткая беззвучная петля.

Настройте и зациклите первый образец, как описано в уроке «:ref:`how to prepare a sample`».

Зациклите второй семпл на очень короткой части в начале, например, от точки 1 до точки 2 или 3.
Укажите ту же корневую клавишу и коррекцию, что и для первого семпла.


Первый инструмент: фазы атаки и поддержки
-----------------------------------------

Создайте первый инструмент с семплами, включающими фазы атаки и поддержки звука.
Настройте глобальный раздел следующим образом:

* выберите опцию петли в цикле воспроизведения (2-й выбор),
* укажите 0,01 с в затухании огибающей громкости (очень короткое затухание).

Теперь у вас есть инструмент без затухания.


Второй инструмент: фаза затухания
---------------------------------

Создайте второй инструмент для затухания, включающий семпл затухания с очень короткой пустой петлёй в начале.
Настройте это таким образом:

* выберите опцию :guilabel:`петля + затухание` в :guilabel:`Играть петлю` (3-й выбор),
* выберите большое число, например, 100 секунд, в :guilabel:`Огибающая громкости: затухание (сек)`, чтобы затухание не приглушалось,
* приблизительно определите продолжительность атаки в первом семпле и используйте это значение в атаке огибающей громкости.

Теперь у вас есть инструмент, который молчит до тех пор, пока вы не отпустите клавишу, и тогда вы сможете услышать фазу затухания.
Вы также можете заметить, что очень быстрый удар по клавише вызывает приглушение затухания.
Это едва заметно здесь с примером, так как атака трубы очень быстрая.
Продолжительность атаки была немного увеличена в примере.


Объединение обоих инструментов
------------------------------

Создайте пресет, используя эти два инструмента.
Первый инструмент слышен при нажатии клавиши, а второй — при отпускании клавиши.
Затем вы можете прослушать результат и попытаться сделать более плавный переход между фазой поддержки и затуханием:

* приглушая первый или второй инструмент,
* увеличивая продолжительности затухания первого инструмента.

Результат с файлами примеров можно загрузить :download:`здесь <https://www.polyphone-soundfonts.com/downloads/tutorials/custom%20release.sf2>`.

А здесь вы можете услышать разницу между классическим и заказным затуханием:

* :download:`классическое затухание <https://www.polyphone-soundfonts.com/downloads/tutorials/classic-release.mp3>`
* :download:`заказное затухание  <https://www.polyphone-soundfonts.com/downloads/tutorials/custom-release.mp3>`
